<!DOCTYPE html><html><head><head> <!-- Include Meta Tags Here --><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="viewport" content="width=device-width, height=device-height, initial-scale=1 user-scalable=no, shrink-to-fit=no"><meta content='#000000' name='theme-color'/><meta name="keywords" content="Blog, CCIE, Cisco, Wireshark, PCAP, Suricata, Bro, Zeek"><title>Failing Forward | Install EVE-NG in Google Cloud (2021 Edition)</title><!-- Open Graph general (Facebook, Pinterest & Google+) --><meta name="og:title" content="Failing Forward | Install EVE-NG in Google Cloud (2021 Edition)"><meta name="og:description" content="This blog outlines the process for installing EVE-NG in Google Cloud in 15 minutes or less. It is the first post to accompany the video series on Network Collective YouTube channel."><meta name="og:image" content="/assets/images/posts/2021-02-28-eve-ng-in-gcp/part-1a.png"><meta name="og:image:alt" content="Failing Forward | Install EVE-NG in Google Cloud (2021 Edition)"><meta name="og:url" content="https://blog.showipintbri.com/pages/showipintbri/blog/eve-ng-in-gcp"><meta name="article:author" content="https://www.facebook.com/NetCollectivePC"><meta name="og:site_name" content="Failing Forward | Install EVE-NG in Google Cloud (2021 Edition)"><meta name="og:type" content="website"> <!-- Twitter --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Failing Forward | Install EVE-NG in Google Cloud (2021 Edition)"><meta name="twitter:description" content="This blog outlines the process for installing EVE-NG in Google Cloud in 15 minutes or less. It is the first post to accompany the video series on Network Collective YouTube channel."><meta name="twitter:site" content="@showipintbri"><meta name="twitter:creator" content="@showipintbri"><meta name="twitter:image" content="https://blog.showipintbri.com/assets/images/posts/2021-02-28-eve-ng-in-gcp/part-1a.png"> <!-- Search Engine --><meta name="description" content="This blog outlines the process for installing EVE-NG in Google Cloud in 15 minutes or less. It is the first post to accompany the video series on Network Collective YouTube channel."><meta name="image" content="/assets/images/posts/2021-02-28-eve-ng-in-gcp/part-1a.png"> <!-- Schema.org for Google --><meta itemprop="name" content="Failing Forward | Install EVE-NG in Google Cloud (2021 Edition)"><meta name="author" content="Tony E."/><meta itemprop="description" content="This blog outlines the process for installing EVE-NG in Google Cloud in 15 minutes or less. It is the first post to accompany the video series on Network Collective YouTube channel."><meta itemprop="image" content="/assets/images/posts/2021-02-28-eve-ng-in-gcp/part-1a.png"><title>Failing Forward</title><link rel="stylesheet" href="/pages/showipintbri/assets/css/style.css"> <script src="https://kit.fontawesome.com/6a97161b76.js" crossorigin="anonymous"></script><link rel="shortcut icon" href="https://blog.showipintbri.com/pages/showipintbri/assets/images/logo.png" type="image/x-icon"></head></head><body><nav class="navbar is-black is-fixed-top" role="navigation" aria-label="main navigation" id="navbar"><div class="container"> <!-- logo or branding image on left side --><div class="navbar-brand"> <a class="navbar-item" href="https://blog.showipintbri.com/pages/showipintbri/"> <strong>Failing Forward</strong> </a><div class="navbar-burger" data-target="navbar-menu"> <span></span> <span></span> <span></span></div></div><!-- children of navbar-menu must be navbar-start and/or navbar-end --><div class="navbar-menu has-background-black" id="navbar-menu"> <!-- navbar items | left side --> <!--<div class="navbar-start"></div>--> <!-- navbar items | right side --><div class="navbar-end"> <a class="navbar-item " href="https://blog.showipintbri.com/pages/showipintbri/">HOME</a> <a class="navbar-item" href="https://blog.showipintbri.com/pages/showipintbri/#about">ABOUT</a> <a class="navbar-item" href="https://blog.showipintbri.com/pages/showipintbri/#contact">CONTACT</a><div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link"> BLOG </a><div class="navbar-dropdown has-background-black is-left"> <a href="https://blog.showipintbri.com/pages/showipintbri/blog" class="navbar-item has-text-grey-light "> BLOG POSTS </a> <a href="https://blog.showipintbri.com/pages/showipintbri/tags" class="navbar-item has-text-grey-light "> TAGS </a> <!-- <a href="https://blog.showipintbri.com/pages/showipintbri/categories" class="navbar-item has-text-grey-light "> CATEGORIES </a> <a href="https://blog.showipintbri.com/pages/showipintbri/search" class="navbar-item has-text-grey-light "> SEARCH </a> --></div></div></div></div></div></nav><!-- Bulma Navbar JS --> <script> document.addEventListener('DOMContentLoaded', function () { /* Get all "navbar-burger" elements */ var $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0); /* Check if there are any navbar burgers */ if ($navbarBurgers.length > 0) { /* Add a click event on each of them */ $navbarBurgers.forEach(function ($el) { $el.addEventListener('click', function () { /* Get the target from the "data-target" attribute */ var target = $el.dataset.target; var $target = document.getElementById(target); /* Toggle the class on both the "navbar-burger" and the "navbar-menu" */ $el.classList.toggle('is-active'); $target.classList.toggle('is-active'); }); }); } }); </script><section class="hero is-fullheight has-text-centered" id="post"><div class="hero-body"><div class="container"> <a href="/pages/showipintbri/blog/eve-ng-in-gcp" class="has-text-black" id="title"><h1 class="title has-text-centered is-2 has-text-weight-semibold ">Install EVE-NG in Google Cloud (2021 Edition)</h1></a><hr class="has-background-black"><div class="columns is-variable is-5"><div class="column is-6"><figure class="image is-16by9 has-shadow"> <img src="/assets/images/posts/2021-02-28-eve-ng-in-gcp/part-1a.png" alt="" id="post-image"></figure></div><div class="subtitle column is-5 has-text-left-desktop has-text-left-fullhd has-text-left-tablet has-text-center-mobile"><p id="description" class="content is-small has-text-weight-medium is-uppercase">This blog outlines the process for installing EVE-NG in Google Cloud in 15 minutes or less. It is the first post to accompany the video series on Network Collective YouTube channel.</p><p class="subtitle is-6 is-uppercase has-text-weight-normal has-text-black-ter">Published on <b>February 28, 2021</b> by <a href="https://twitter.com/showipintbri" target="_blank"><b class="has-text-link"><u>Tony E.</u></b> </a></p><p class="subtitle is-uppercase"> <i class="fas fa-tags"></i> <a href="/blog/tag/eve-ng"><span class="tag is-link">eve-ng</span></a> <a href="/blog/tag/google-cloud"><span class="tag is-link">google cloud</span></a></p><p class="subtitle is-uppercase"><i class="fas fa-clock"></i> <b class="has-text-link"> 4 min </b>READ</p></div></div><div class="content has-text-left-desktop has-text-left-fullhd has-text-left has-text-left-tablet has-text-left-mobile"><p><p>This is an update from the content I released back in 2018. Thanks to the EVE-NG development team this process can be completed in just 15 minutes. I released a video series on Network Collective covering this topic and other EVE-NG Tips and Tricks.</p><h4 id="process-summary">Process Summary</h4><ol><li>Login to Google Cloud using your existing Google account or create a new account</li><li>Create a new project</li><li>Create the nested virtualization Ubuntu VM image</li><li>Create a new VM instance using the new image</li><li>Run the installation script</li><li>Run the setup wizard</li></ol><center><iframe width="560" height="315" src="https://www.youtube.com/embed/sMYtz-bSZLQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></center><h2 id="1-log-in-to-google-cloud">1. Log In To Google Cloud</h2><p>You can use your existing Google or Gmail account or create a new account for google cloud. <a href="https://cloud.google.com">https://cloud.google.com</a> If this is your first time Google will give you a $300 free credit. This is more than enough to test this process and practice a bunch of labs.</p><h2 id="2-create-a-new-project">2. Create A New Project</h2><h2 id="3-create-the-new-vm-image">3. Create The New VM Image</h2><p>Navigate to: <strong>Compute Engine –&gt; VM instances</strong> and switch to your new Project from the upper left hand drop down.</p><p><strong>NOTE:</strong> This takes a few minutes.</p><p>Once the Compute Engine is ready, click on the <strong>“Launch Cloud Shell”</strong> icon (in the upper right).</p><p>Make sure your Cloud Shell session is set to your newly created project. (It should have your project name in the command prompt.)</p><p>Enter the command: (this is 1 long command)</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gcloud compute images create nested-virt-ubuntu --source-image-project=ubuntu-os-cloud --source-image-family=ubuntu-1604-lts --licenses="https://www.google.com/compute/v1/projects/vm-options/global/licenses/enable-vmx"
</code></pre></div></div><p><strong>NOTE:</strong> It could take a few minutes to return to an interactive prompt. Be patient. You are ready when the shell returns “STATUS READY”:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>user@cloudshell:~ (test-305418)$ gcloud compute images create nested-virt-ubuntu --source-image-project=ubuntu-os-cloud --source-image-family=ubuntu-1604-lts --licenses="https://www.google.com/compute/v1/projects/vm-options/global/li
censes/enable-vmx"
Created [https://www.googleapis.com/compute/v1/projects/test-305418/global/images/nested-virt-ubuntu].
NAME                PROJECT      FAMILY  DEPRECATED  STATUS
nested-virt-ubuntu  test-305418                      READY
user@cloudshell:~ (test-305418)$
</code></pre></div></div><p>Now, close the Cloud Shell terminal.</p><h2 id="4-create-the-new-vm-instace">4. Create The New VM instace</h2><p>Click on the “Create” button in the VM instances frame in the center of the screen.</p><ul><li><strong>Name:</strong> Anything you want (cannot change)</li><li><strong>Labels:</strong> (optional)</li><li><strong>Region:</strong> Choose the region nearest you (cannot change)</li><li><strong>Zone:</strong> (cannot change)</li><li><strong>Machine Family:</strong> General Purpose</li><li><strong>Series:</strong> Must choose “Intel Cascade Lake” or “Intel Skylake”</li><li><strong>Machine Type:</strong> This is going to depend on what you need for labbing. You cannot change this unless you power-off your VM. Just to get started I choose “n2-standard-4”.</li><li><strong>Confidential VM service:</strong> Unchecked</li><li><strong>Container:</strong> Unchecked</li><li><strong>Boot Disk:</strong> Choose the image we created from the cloud shell.<ul><li>It will be under <strong>“Custom images”</strong>:</li><li>Show images from: <strong><em>Your new project name</em></strong><ul><li><strong>Image:</strong> the image name we created earlier</li><li><strong>Boot Disk Type:</strong> SSD</li><li><strong>Size:</strong> This is going to be determined by you on how you intend to use the VM for labbing. To get started I select 50GB.</li></ul></li></ul></li><li><strong>Identity and API access:</strong> leave default</li><li><strong>Firewall:</strong> Choose “Allow HTTP traffic”</li></ul><p>Click <strong>“Create”</strong> at the bottom.</p><p>Wait for your VM to be provisioned, this could a minute or two.</p><h2 id="5-run-the-installation-script">5. Run The Installation Script</h2><p>Once your VM is provisioned it will automatically be started. Use the built-in SSH feature to connect to the VM’s console.</p><p>Once you’re SSH’d into the VM become root, grab the installation script, update the package manager and upgrade current packages.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo -i

wget -O - http://www.eve-ng.net/repo/install-eve.sh | bash -i

apt update

apt upgrade
</code></pre></div></div><p>Reboot the VM.</p><h2 id="6-run-the-setup-wizard">6. Run The Setup Wizard</h2><p>Connect to it again via the built in SSH.</p><p>You will be presented with a configuration wizard.</p><h1 id="stop">STOP!</h1><p>When you are greeted with the wizard to enter a root password, <strong>don’t!</strong></p><p>Hold <strong><code class="language-plaintext highlighter-rouge">CTRL</code></strong> and press <strong><code class="language-plaintext highlighter-rouge">C</code></strong>, become root <strong><code class="language-plaintext highlighter-rouge">sudo -i</code></strong></p><p>This will restart the wizard and allow you to change root’s password.</p><p>Follow the initial configuration wizard.</p><ul><li><strong>Enter Root Password:</strong></li><li><strong>Enter Root Password Again:</strong></li><li><strong>Hostname:</strong> anything you want (I leave default)</li><li><strong>DNS Domain Name:</strong> anything you want (I leave default)</li><li><strong>DHCP/Static IP:</strong> Choose DHCP/Static</li><li><strong>NTP:</strong> (leave empty)</li><li><strong>Proxy:</strong> Choose “Direct connection”</li></ul><p>After hitting enter, the setup wizard will kick you out.</p><h2 id="7-youre-finished--whats-next">7. You’re Finished / What’s Next?</h2><p>At this point the installation is finished. You should have a working EVE-NG server in Google Cloud.</p><p>Next, you should:</p><ul><li>Start uploading the images you need for labbing</li><li>Start importing your already created labs</li><li>Start thinking securing the ingress and egress traffic of your EVE-NG lab.</li><li>Check out my other blogs and videos for more EVE-NG: Tips &amp; Tricks</li></ul></p></div></div></div></section><footer id="footer"> <!--Footer Button--><div class="container has-text-centered has-background-grey-darker" id="backtotop"> <a class="has-text-white" onclick="window.scroll(0,0)">BACK TO TOP</a></div><!--Footer Main Section--><div class="has-background-grey-darker"><div class="container columns"> <!--Name Section--><div class="column has-text-left-desktop has-text-centered-mobile"> <a href="https://blog.showipintbri.com/pages/showipintbri/#about"><div class="columns"><div class="column is-one-fifth-desktop is-one-fifth-fullhd is-one-quarter-tablet"><figure class="image is-64x64"> <img class="is-rounded" src="/assets/images/tonye.jpg"></figure></div><div class="column is-marginless"><h5 class="has-text-grey-lighter">Tony E.</h5><div class="content has-text-grey"><p>Tony E. is a network security engineer, CCIE# 64908 & GIAC: Network Fore...</p></div></div></div></a></div><!--Link Section--><div class="column has-text-white"><h3>More Links</h3><!--<li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/certifications">certifications</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/cisco-asa">cisco asa</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/eve-ng">eve-ng</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/future">future</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/giac">giac</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/goals">goals</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/google-cloud">google cloud</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/gparted">gparted</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/hex">hex</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/internet-access">internet access</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/intrusion-prevention">intrusion prevention</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/ips">ips</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/live">live</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/network-collective">network collective</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/network-field-day">network field day</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/network-forensics">network forensics</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/nfd23">nfd23</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/organization">organization</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/partitions">partitions</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/past">past</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/pcap">pcap</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/present">present</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/sans">sans</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/scapy">scapy</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/scripts">scripts</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/sharkfest">sharkfest</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/stream">stream</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/surface-pro">surface pro</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/suricata">suricata</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/t-i-w-a">t.i.w.a</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/tags">Tags</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/tcp">tcp</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/tcpdump">tcpdump</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/tracewrangler">tracewrangler</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/vyos">vyos</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/wireshark">wireshark</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/tag/zeek">zeek</a></li>--><li> <a target="_blank" href="https://blog.showipintbri.com/pages/showipintbri/feed.xml">Subscribe via RSS</a></li></div><!--Blog-post Section--><div class="column has-text-white"><h3>Recent Posts</h3><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/sharkfest-2021">WiresharkFest 2021 (US)</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/suricata-vyos">Build Your Own IPS w/ Suricata Container on VyOS Router</a></li><li> <a href="https://blog.showipintbri.com/pages/showipintbri/blog/sans-for572">SANS: FOR572 & Passing the GNFA!!!</a></li></div></div></div><div class="has-background-black has-text-centered has-text-white" id="credits"> <i class="far fa-copyright"></i> 2021 | Based on <a href="https://github.com/thedevslot/WhatATheme" target="_blank" rel="noopener noreferrer">WhatATheme</a> by <a href="https://www.twitter.com/thedevslot" target="_blank" rel="noopener noreferrer">TheDevsLot</a> Powered by <a href="https://jekyllrb.com/" target="_blank">Jekyll</a></div></footer></body></html>
